# Deploy a Ghost CMS instance

## ghost-cms.yaml (without initial SSL)

This templates install an instance with the popular [Ghost CMS](https://ghost.org). This includes all necessary steps as documented in the [install guide](https://ghost.org/docs/install/ubuntu/):

- updates the OS of your instance
- installs nginx
- installs nodejs 16.x
- installs a mysql server
- installs the Ghost software (no configuration)
- creates a database with user for Ghost

The template requests the following input:

- Stack Name - name shown in your Orchestration overview for this stack
- Creation Timeout - timeout in minutes until Heat considers it as failed
- Password for user "u123456-user" - password of your openstack user
- Instance Size - dropdown to choose from
- Hostname - the name of your server instance
- Image Name - drop down to choose your OS version
- SSH Keypair Name - the name says it all - upload/create a keypair before launching the stack
- Private Network - drop down - choose the name of your project network
- External Network - name of the external network (ext01 on pluscloud open)
- Sitename - the fully qualified domain name of your new site eg. blog.example.com

You will have to create an proper dns entry for your sitename in your DNS, then log into your instance as user ubuntu and run a:

```
cd /var/www/blog.example.com
ghost install --sslemail <YOUR_MAIL_ADDRESS> --sslstaging --url https://<YOUR_SITENAME>/ --db mysql --dbhost 127.0.0.1 --dbuser ubuntu --dbpass <DB_PASSWORD> --dbname ghostcms --auto
```

The public IP address can be seen in the overview section your heat stack. The password of your database generated by Heat can be found in your cloud-init-output.log in the /var/log/ directory. If the ssl verification fails, because an old dns record has been cached, you can run:

```
ghost setup ssl
```

To redo that part.

## ghost-cms-with-ssl.yaml

This template uses the dynamic dns service of [regfish.de](http://regfish.de/) which is easy to use just with an API token and a wget call. There other services our there you might want to check:

- [Dynu](https://www.dynu.com)
- [NO IP](https://www.noip.com)
- [Cloudfare](https://cloudflare.com)
- [FreeDNS](https://freedns.afraid.org/)
- [Duck DNS](https://www.duckdns.org/)
- and many more

In addition to the first template it updates/creates an DNS record for your sitename. With a dns record Ghost can automatically create a valid ssl certificate.

Nothing else to do, you're ready to fire your first blog entry.

# For further reading

* [How to install Ghost on Ubuntu](https://ghost.org/docs/install/ubuntu/)
* [Ghost CLI](https://ghost.org/docs/ghost-cli/)
